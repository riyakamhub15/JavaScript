<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise 14</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Nosifer&display=swap");
      body {
        background-color: rgb(235, 121, 140);
        color: black;
        font-family: "Nosifer", sans-serif;
        font-weight: 400;
        font-style: normal;
        font-size: 30px;
      }
    </style>
  </head>
  <body>

    <script>

      const addItem = async (item) => {
        await randomDelay();
        const div = document.createElement("div");
        div.textContent=item+"...";
        document.body.append(div);
      };

      const randomDelay=()=>{
        return new Promise((resolve, reject)=>{
           const timeout=1+6* Math.random();
            setTimeout(() => {
                resolve()
            }, timeout *500);
        });
      };

      async function main(){

        let text = [
        "Initialized hacking now reading your data",
        "Reading your files",
        "Password files detected",
        "Sending all passwords and personal files to server",
        "Cleaning up"
      ];
      
      const t=setInterval(()=>{
        let last = document.body.getElementsByTagName("div");
        if(last.length===0) return;
        last = last[last.length-1];
       
        if(last.textContent.endsWith("...")){
            last.textContent=last.textContent.slice(0, -3)
        }
        else{
            last.textContent+=".";
        }
    
      }, 200);

      

      for (const item of text) {
        await addItem(item);
      }

      await randomDelay();
      clearInterval(t);
      }

      main();
    </script>
  </body>
</html>
